import{r,j as e,e as l,c as G,a as V,I as D,u as j,d as H,b as S,V as u,S as N,H as g,t as E,z as b,f as W}from"./index-B5sKGF0T.js";import{D as z}from"./DynamicModuleLoader-CRhxfWmK.js";import{T as B,b as T,c as k,C as w,A as O,d as Z}from"./Avatar-CS1FaJc3.js";import{T as d}from"./Text-SEN0pMjy.js";const X="_Icon_1cx5w_1",F="_inverted_1cx5w_6",$={Icon:X,inverted:F},ot=r.memo(t=>{const{className:a,Svg:s,inverted:i,...c}=t;return e.jsx(s,{className:l(i?$.inverted:$.Icon,{},[a]),...c})}),P="_Skeleton_bhrzp_1",U={Skeleton:P},lt=r.memo(t=>{const{className:a,height:s,width:i,border:c}=t,m={width:i,height:s,borderRadius:c};return e.jsx("div",{className:l(U.Skeleton,{},[a]),style:m})}),f=G("articleDetails/fetchArticleById",async(t,a)=>{const{extra:s,rejectWithValue:i}=a;if(!t)throw new Error("");try{const c=await s.api.get(`/articles/${t}`,{params:{_expand:"user"}});if(!c.data)throw new Error;return c.data}catch(c){return console.log(c),i("error")}}),q={isLoading:!1,error:void 0,data:void 0},J=V({name:"articleDetails",initialState:q,reducers:{},extraReducers:t=>{t.addCase(f.pending,a=>{a.error=void 0,a.isLoading=!0}).addCase(f.fulfilled,(a,s)=>{a.isLoading=!1,a.data=s.payload}).addCase(f.rejected,(a,s)=>{a.isLoading=!1,a.error=s.payload})}}),{reducer:K}=J,Q="_ArticleDetails_1aent_1",Y="_avatar_1aent_5",ee="_img_1aent_9",_={ArticleDetails:Q,avatar:Y,img:ee},te=t=>{var a;return(a=t.articleDetails)==null?void 0:a.data},se=t=>{var a;return((a=t.articleDetails)==null?void 0:a.isLoading)||!1},ae=t=>{var a;return(a=t.articleDetails)==null?void 0:a.error};var ce=(t=>(t.VIEWS="views",t.TITLE="title",t.CREATED="createdAt",t))(ce||{}),C=(t=>(t.CODE="CODE",t.IMAGE="IMAGE",t.TEXT="TEXT",t))(C||{}),ie=(t=>(t.ALL="ALL",t.IT="IT",t.SCIENCE="SCIENCE",t.ECONOMICS="ECONOMICS",t))(ie||{}),v=(t=>(t.BIG="BIG",t.SMALL="SMALL",t))(v||{});const re=t=>r.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},r.createElement("path",{d:"M10.5294 23C10.1088 23 9.74865 22.853 9.44888 22.559C9.14912 22.265 8.99949 21.912 9 21.5V11H10.5294V21.5H18.9412V23H10.5294ZM13.5882 20C13.1676 20 12.8075 19.853 12.5077 19.559C12.2079 19.265 12.0583 18.912 12.0588 18.5V9.5C12.0588 9.0875 12.2087 8.73425 12.5085 8.44025C12.8082 8.14625 13.1682 7.9995 13.5882 8H20.4706C20.8912 8 21.2514 8.147 21.5511 8.441C21.8509 8.735 22.0005 9.088 22 9.5V18.5C22 18.9125 21.8501 19.2658 21.5504 19.5598C21.2506 19.8538 20.8907 20.0005 20.4706 20H13.5882ZM13.5882 18.5H20.4706V9.5H13.5882V18.5Z",fill:"#74A2B2"})),ne="_CodeRedesigned_1m4bm_9",oe="_copyBtn_1m4bm_18",M={CodeRedesigned:ne,copyBtn:oe},le=r.memo(t=>{const{className:a,text:s}=t,i=r.useCallback(()=>{navigator.clipboard.writeText(s)},[s]);return e.jsxs("pre",{className:l(M.CodeRedesigned,{},[a]),children:[e.jsx(D,{clickable:!0,onClick:i,className:M.copyBtn,Svg:re}),e.jsx("code",{children:s})]})}),de="_ArticleCodeBlockComponent_1jgpn_1",me={ArticleCodeBlockComponent:de},xe=r.memo(t=>{const{className:a,block:s}=t,{t:i}=j();return e.jsx("div",{className:l(me.ArticleCodeBlockComponent,{},[a]),children:e.jsx(le,{text:s.code})})}),_e="_img_1errv_1",y={img:_e},he=r.memo(t=>{const{className:a,block:s}=t,{t:i}=j();return e.jsxs("div",{className:l(y.ArticleImageBlockComponent,{},[a]),children:[e.jsx("img",{src:s.src,alt:s.title,className:y.img}),s.title&&e.jsx(B,{text:s.title,align:T.CENTER})]})}),ge="_title_cr1a7_1",je="_paragraph_cr1a7_5",I={title:ge,paragraph:je},pe=r.memo(t=>{const{className:a,block:s}=t,{t:i}=j();return e.jsxs("div",{className:l(I.ArticleTextBlockComponent,{},[a]),children:[s.title&&e.jsx(d,{title:s.title,className:I.title}),s.paragraphs.map((c,m)=>e.jsx(d,{text:c,className:I.paragraph},c))]})}),ue=t=>{switch(t.type){case C.CODE:return e.jsx(xe,{block:t,className:_.block},t.id);case C.IMAGE:return e.jsx(he,{block:t,className:_.block},t.id);case C.TEXT:return e.jsx(pe,{className:_.block,block:t},t.id);default:return null}},Ce={articleDetails:K},Ne=()=>{const t=S(te);return e.jsxs(e.Fragment,{children:[e.jsx(d,{title:t==null?void 0:t.title,size:"l",bold:!0}),e.jsx(d,{title:t==null?void 0:t.subtitle}),e.jsx(k,{fallback:e.jsx(N,{width:"100%",height:420,border:"16px"}),src:t==null?void 0:t.img,className:_.img}),t==null?void 0:t.blocks.map(ue)]})},ve=()=>{const t=N;return e.jsxs(u,{gap:"16",max:!0,children:[e.jsx(t,{className:_.avatar,width:200,height:200,border:"50%"}),e.jsx(t,{className:_.title,width:300,height:32}),e.jsx(t,{className:_.skeleton,width:600,height:24}),e.jsx(t,{className:_.skeleton,width:"100%",height:200}),e.jsx(t,{className:_.skeleton,width:"100%",height:200})]})},dt=r.memo(t=>{const{className:a,id:s}=t,{t:i}=j(),c=H(),m=S(se),h=S(ae);r.useEffect(()=>{c(f(s))},[c,s]);let x;return m?x=e.jsx(ve,{}):h?x=e.jsx(B,{align:T.CENTER,title:i("Произошла ошибка при загрузке статьи.")}):x=e.jsx(Ne,{}),e.jsx(z,{reducers:Ce,removeAfterUnmount:!0,children:e.jsx(u,{gap:"16",max:!0,className:l(_.ArticleDetails,{},[a]),children:x})})}),Ae="_BIG_60oi3_1",Le="_views_60oi3_1",fe="_header_60oi3_4",we="_username_60oi3_8",Ie="_date_60oi3_11",Se="_title_60oi3_14",ke="_img_60oi3_17",Be="_footer_60oi3_23",Ee="_textBlock_60oi3_28",be="_SMALL_60oi3_33",$e="_imageWrapper_60oi3_51",Me="_infoWrapper_60oi3_61",ye="_types_60oi3_66",De="_ArticleListItemRedesigned_60oi3_86",Te="_card_60oi3_89",n={BIG:Ae,views:Le,header:fe,username:we,date:Ie,title:Se,img:ke,footer:Be,textBlock:Ee,SMALL:be,imageWrapper:$e,infoWrapper:Me,types:ye,ArticleListItemRedesigned:De,card:Te},Re=r.memo(t=>{const{className:a,view:s}=t,i=n.ArticleListItemRedesigned,c=N;if(s===v.BIG){const h=e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:n.header,children:[e.jsx(c,{border:"50%",height:30,width:30}),e.jsx(c,{width:150,height:16,className:n.username}),e.jsx(c,{width:150,height:16,className:n.date})]}),e.jsx(c,{width:250,height:24,className:n.title}),e.jsx(c,{height:200,className:n.img}),e.jsx("div",{className:n.footer,children:e.jsx(c,{height:36,width:200})})]});return e.jsx("div",{className:l(i,{},[a,n[s]]),children:e.jsx(w,{border:"round",className:n.card,children:h})})}const m=e.jsxs(e.Fragment,{children:[e.jsx(c,{width:"100%",height:150,border:"32px",className:n.img}),e.jsx("div",{className:n.infoWrapper,children:e.jsx(c,{width:130,height:16})}),e.jsx(c,{width:150,height:16,className:n.title})]});return e.jsx("div",{className:l(i,{},[a,n[s]]),children:e.jsx(w,{border:"round",className:n.card,children:m})})}),Ge="_SMALL_lo5s3_1",Ve="_card_lo5s3_1",He="_img_lo5s3_9",We="_info_lo5s3_15",ze="_footer_lo5s3_19",Oe="_avatar_lo5s3_23",Ze="_BIG_lo5s3_27",Xe="_textBlock_lo5s3_32",o={SMALL:Ge,card:Ve,img:He,info:We,footer:ze,avatar:Oe,BIG:Ze,textBlock:Xe},Fe=t=>r.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",...t},r.createElement("path",{d:"M16 13C16.7956 13 17.5587 13.3161 18.1213 13.8787C18.6839 14.4413 19 15.2044 19 16C19 16.7956 18.6839 17.5587 18.1213 18.1213C17.5587 18.6839 16.7956 19 16 19C15.2044 19 14.4413 18.6839 13.8787 18.1213C13.3161 17.5587 13 16.7956 13 16C13 15.2044 13.3161 14.4413 13.8787 13.8787C14.4413 13.3161 15.2044 13 16 13ZM16 8.5C20.8606 8.5 25.0313 11.439 26.8494 15.6358C26.9501 15.8681 26.9501 16.1319 26.8494 16.3642C25.0313 20.561 20.8606 23.5 16 23.5C11.1394 23.5 6.96872 20.561 5.15062 16.3642C5.04995 16.1319 5.04995 15.8681 5.15062 15.6358C6.96872 11.439 11.1394 8.5 16 8.5ZM7.4063 15.5657C7.25674 15.8361 7.25674 16.1639 7.4063 16.4343C8.21404 17.8945 9.38206 19.1273 10.8025 20.0133C12.3617 20.9858 14.1624 21.5013 16 21.5013C17.8376 21.5013 19.6383 20.9858 21.1975 20.0133C22.6179 19.1273 23.786 17.8945 24.5937 16.4343C24.7433 16.1639 24.7433 15.8361 24.5937 15.5657C23.786 14.1055 22.6179 12.8727 21.1975 11.9867C19.6383 11.0142 17.8376 10.4987 16 10.4987C14.1624 10.4987 12.3617 11.0142 10.8025 11.9867C9.38206 12.8727 8.21404 14.1055 7.4063 15.5657Z",fill:"currentColor"})),Pe=r.memo(t=>{const{className:a,article:s,view:i,target:c}=t,{t:m}=j(),h=e.jsxs(e.Fragment,{children:[e.jsx(O,{size:32,src:s.user.avatar,className:o.avatar}),e.jsx(d,{bold:!0,text:s.user.username})]}),x=e.jsxs(g,{gap:"8",children:[e.jsx(D,{Svg:Fe}),e.jsx(d,{text:String(s.views),className:o.views})]});if(i===v.BIG){const A=s.blocks.find(R=>R.type===C.TEXT);return e.jsx(w,{padding:"24",max:!0,"data-testid":"ArticleListItem",className:l(o.ArticleListItem,{},[a,o[i]]),children:e.jsxs(u,{max:!0,gap:"16",children:[e.jsxs(g,{gap:"8",max:!0,children:[h,e.jsx(d,{text:s.createdAt})]}),e.jsx(d,{title:s.title,bold:!0}),e.jsx(d,{title:s.subtitle,size:"s"}),e.jsx(k,{fallback:e.jsx(N,{width:"100%",height:250}),src:s.img,className:o.img,alt:s.title}),(A==null?void 0:A.paragraphs)&&e.jsx(d,{className:o.textBlock,text:A.paragraphs.slice(0,2).join(" ")}),e.jsxs(g,{max:!0,justify:"between",children:[e.jsx(E,{target:c,to:b(s.id),children:e.jsx(W,{variant:"outline",children:m("Читать далее...")})}),x]})]})})}return e.jsx(E,{"data-testid":"ArticleListItem",target:c,to:b(s.id),className:l(o.ArticleListItem,{},[a,o[i]]),children:e.jsxs(w,{className:o.card,border:"partial",padding:"0",children:[e.jsx(k,{fallback:e.jsx(N,{width:"100%",height:200}),alt:s.title,src:s.img,className:o.img}),e.jsxs(u,{className:o.info,gap:"4",children:[e.jsx(d,{title:s.title,className:o.title}),e.jsxs(u,{gap:"4",className:o.footer,max:!0,children:[e.jsxs(g,{justify:"between",max:!0,children:[e.jsx(d,{text:s.createdAt,className:o.date}),x]}),e.jsx(g,{gap:"4",children:h})]})]})]})})}),Ue=r.memo(t=>e.jsx(Pe,{...t})),qe="_BIG_jb33v_1",Je="_card_jb33v_1",Ke="_SMALL_jb33v_5",Qe="_row_jb33v_14",p={BIG:qe,card:Je,SMALL:Ke,row:Qe},Ye=t=>new Array(t===v.SMALL?9:3).fill(0).map((a,s)=>e.jsx(Re,{className:p.card,view:t},s)),mt=r.memo(t=>{const{className:a,articles:s,view:i=v.SMALL,isLoading:c,target:m}=t,{t:h}=j();return!c&&!s.length?e.jsx("div",{className:l(p.ArticleList,{},[a,p[i]]),children:e.jsx(B,{size:Z.L,title:h("Статьи не найдены")})}):e.jsxs(g,{wrap:"wrap",gap:"16",className:l(p.ArticleListRedesigned,{},[]),"data-testid":"ArticleList",children:[s.map(x=>e.jsx(Ue,{article:x,view:i,target:m,className:p.card},x.id)),c&&Ye(i)]})}),et="_MainLayout_4ft5w_1",tt="_left_4ft5w_7",st="_content_4ft5w_11",at="_right_4ft5w_19",L={MainLayout:et,left:tt,content:st,right:at},xt=r.memo(t=>{const{className:a,content:s,left:i,right:c}=t;return e.jsxs("div",{className:l(L.MainLayout,{},[a]),children:[i&&e.jsx("div",{className:L.left,children:i}),e.jsx("div",{className:L.content,children:s}),c&&e.jsx("div",{className:L.right,children:c})]})});export{v as A,ot as I,xt as S,ce as a,ie as b,mt as c,lt as d,dt as e,te as g};
